global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: synaptica-gateway
    metrics_path: /metrics
    static_configs:
      - targets:
          - api-gateway:8080

  - job_name: synaptica-training
    metrics_path: /metrics
    static_configs:
      - targets:
          - training-service:8088

remote_write:
  - url: ${CORTEX_REMOTE_WRITE_URL:https://cortex.example.com/api/prom/push}
    basic_auth:
      username: ${CORTEX_USERNAME:tenant}
      password: ${CORTEX_PASSWORD:changeme}
    write_relabel_configs:
      - source_labels: ["__name__"]
        regex: "synaptica_.*"
        action: keep
